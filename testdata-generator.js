var fs = require('fs');
var stream = fs.createWriteStream('testdata.json', {'flags': 'a', 'encoding': null, 'mode': 0666 });

var shortIpsum = "Lorem ipsum dolor sit amet";
var longIpsum = "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce ut volutpat sem. Sed ac nisi ac mauris tristique vestibulum et et diam. Nam diam velit, venenatis a malesuada vel, consectetur id risus. Sed a neque massa. Nulla ultricies, eros vel euismod malesuada, tortor elit scelerisque nulla, ac semper eros mi at sapien. Nulla lacinia pellentesque commodo. Donec euismod mauris est, eu aliquet dolor. Curabitur interdum massa at libero sodales convallis. Vestibulum lobortis malesuada elit. Praesent vel enim ipsum. Vivamus at vehicula mauris.\nAliquam erat volutpat. Vivamus ultricies, dui sed adipiscing consectetur, nisi erat eleifend sem, fermentum fringilla odio risus sit amet dolor. Duis malesuada aliquam porta. Vivamus dignissim rutrum urna, quis molestie neque interdum non. In tellus metus, congue eu convallis quis, laoreet ut velit. Nulla vel ipsum mauris. Nunc massa mauris, consectetur non lacinia nec, lacinia id erat. Nulla dapibus blandit magna a aliquet. Aliquam rutrum erat ut quam interdum rhoncus. Praesent dapibus luctus leo, eget condimentum nibh sagittis at. Duis ornare arcu velit. Mauris sollicitudin dapibus scelerisque. In enim neque, bibendum id aliquam vel, vestibulum eu orci. Donec velit erat, fringilla eu consequat sit amet, volutpat eleifend ligula. Donec aliquam leo at lacus rutrum ultricies. Etiam at accumsan risus. Donec semper ornare risus, at sodales risus vestibulum ut. Mauris accumsan venenatis neque quis faucibus.\nAenean interdum hendrerit sem ac pharetra. Vestibulum tempus, mauris a feugiat cursus, lacus ante malesuada libero, vel pellentesque massa tortor eu nunc. Nunc consequat erat sed orci aliquam et iaculis neque pretium. Mauris dolor lectus, dictum eu rutrum a, volutpat vel nibh. Etiam odio nibh, varius a bibendum a, blandit ut lectus. Ut id dui non lorem commodo iaculis at hendrerit nisl. Aliquam ultrices, purus at iaculis laoreet, quam dui volutpat elit, ut accumsan felis mauris vel mi. Fusce neque enim, pretium in auctor vitae, scelerisque sit amet leo. Ut sed lacus et augue auctor interdum interdum fermentum eros. Suspendisse eget ipsum eget massa dapibus ultricies. Nullam magna urna, porta nec dapibus at, elementum vel mauris. Sed imperdiet cursus purus, id sollicitudin mauris malesuada at. Nunc faucibus eleifend quam, sit amet imperdiet neque iaculis vel. Cras lobortis gravida velit ac hendrerit. Nunc nisi augue, sodales ultrices euismod non, rutrum quis augue. Suspendisse rutrum libero vel sem viverra vehicula. Proin porta commodo nisl vel tincidunt. Duis eros turpis, accumsan euismod molestie sodales, posuere quis libero. Integer faucibus tortor non purus porta et ultricies erat blandit. Quisque feugiat consequat rutrum.\nNam pretium, libero vitae blandit tincidunt, quam magna blandit arcu, in sollicitudin sapien dolor eu quam. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam facilisis sodales felis, ac euismod odio volutpat non. Nulla non volutpat felis. Sed lacus mi, vehicula vitae porta et, malesuada ut enim. Proin sed mauris sapien, eu feugiat mi. Integer luctus, risus sit amet vestibulum sagittis, massa felis porta dolor, vel bibendum arcu augue quis neque. Sed ac fermentum diam. Aliquam sollicitudin quam in risus venenatis placerat. Sed ut nulla lectus, a tempor magna. Vivamus porttitor lacus vitae ante interdum vitae gravida orci facilisis. Nullam pharetra, lectus sit amet tincidunt tincidunt, elit nulla hendrerit lectus, ac ornare eros felis eu quam. In elit enim, sollicitudin ut commodo a, vehicula quis orci. Proin nulla elit, cursus et ultricies nec, rutrum id nunc. Donec pellentesque velit sem, in bibendum lectus. Cras eu nunc at mi dictum scelerisque ut dignissim massa. Aenean congue, ante et lobortis iaculis, ante tellus interdum ante, vitae semper leo orci ac lacus. Curabitur orci eros, elementum quis convallis ut, auctor sit amet turpis.\nNullam tempor augue eu mi sagittis eu vestibulum elit tristique. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Vivamus eget purus viverra metus condimentum pharetra sit amet nec lorem. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean viverra metus leo. Curabitur ipsum dui, vehicula vel ullamcorper ac, mollis id enim. Pellentesque adipiscing gravida ultricies. Integer eleifend facilisis sem et ultricies. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. In orci nisl, molestie nec ornare non, ultricies vel dolor. Donec ut enim eget ipsum porta pretium. Donec eleifend metus at risus scelerisque venenatis. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Vivamus pretium, eros vel mollis ultrices, lorem orci gravida sem, a facilisis nisl lectus a neque. Donec rutrum lacus vel lectus porttitor egestas. Phasellus at tortor metus, et lobortis lectus. Vivamus porta turpis porta justo venenatis eget euismod odio ullamcorper. Duis faucibus, velit eget suscipit tincidunt, felis dolor mattis felis, blandit feugiat libero metus sed turpis. In hac habitasse platea dictumst. Duis dignissim nisi a nibh tristique et mattis metus sodales.";

var totalIters = 0;

function dump() {
    totalIters += 1000;
for (i = 0; i < 1000; i++) {
    stream.write("{id: " + i + " shortStringAttribute:'Lorem ipsum dolor sit amet', longStringAttribute: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce ut volutpat sem. Sed ac nisi ac mauris tristique vestibulum et et diam. Nam diam velit, venenatis a malesuada vel, consectetur id risus. Sed a neque massa. Nulla ultricies, eros vel euismod malesuada, tortor elit scelerisque nulla, ac semper eros mi at sapien. Nulla lacinia pellentesque commodo. Donec euismod mauris est, eu aliquet dolor. Curabitur interdum massa at libero sodales convallis. Vestibulum lobortis malesuada elit. Praesent vel enim ipsum. Vivamus at vehicula mauris.\nAliquam erat volutpat. Vivamus ultricies, dui sed adipiscing consectetur, nisi erat eleifend sem, fermentum fringilla odio risus sit amet dolor. Duis malesuada aliquam porta. Vivamus dignissim rutrum urna, quis molestie neque interdum non. In tellus metus, congue eu convallis quis, laoreet ut velit. Nulla vel ipsum mauris. Nunc massa mauris, consectetur non lacinia nec, lacinia id erat. Nulla dapibus blandit magna a aliquet. Aliquam rutrum erat ut quam interdum rhoncus. Praesent dapibus luctus leo, eget condimentum nibh sagittis at. Duis ornare arcu velit. Mauris sollicitudin dapibus scelerisque. In enim neque, bibendum id aliquam vel, vestibulum eu orci. Donec velit erat, fringilla eu consequat sit amet, volutpat eleifend ligula. Donec aliquam leo at lacus rutrum ultricies. Etiam at accumsan risus. Donec semper ornare risus, at sodales risus vestibulum ut. Mauris accumsan venenatis neque quis faucibus.\nAenean interdum hendrerit sem ac pharetra. Vestibulum tempus, mauris a feugiat cursus, lacus ante malesuada libero, vel pellentesque massa tortor eu nunc. Nunc consequat erat sed orci aliquam et iaculis neque pretium. Mauris dolor lectus, dictum eu rutrum a, volutpat vel nibh. Etiam odio nibh, varius a bibendum a, blandit ut lectus. Ut id dui non lorem commodo iaculis at hendrerit nisl. Aliquam ultrices, purus at iaculis laoreet, quam dui volutpat elit, ut accumsan felis mauris vel mi. Fusce neque enim, pretium in auctor vitae, scelerisque sit amet leo. Ut sed lacus et augue auctor interdum interdum fermentum eros. Suspendisse eget ipsum eget massa dapibus ultricies. Nullam magna urna, porta nec dapibus at, elementum vel mauris. Sed imperdiet cursus purus, id sollicitudin mauris malesuada at. Nunc faucibus eleifend quam, sit amet imperdiet neque iaculis vel. Cras lobortis gravida velit ac hendrerit. Nunc nisi augue, sodales ultrices euismod non, rutrum quis augue. Suspendisse rutrum libero vel sem viverra vehicula. Proin porta commodo nisl vel tincidunt. Duis eros turpis, accumsan euismod molestie sodales, posuere quis libero. Integer faucibus tortor non purus porta et ultricies erat blandit. Quisque feugiat consequat rutrum.\nNam pretium, libero vitae blandit tincidunt, quam magna blandit arcu, in sollicitudin sapien dolor eu quam. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam facilisis sodales felis, ac euismod odio volutpat non. Nulla non volutpat felis. Sed lacus mi, vehicula vitae porta et, malesuada ut enim. Proin sed mauris sapien, eu feugiat mi. Integer luctus, risus sit amet vestibulum sagittis, massa felis porta dolor, vel bibendum arcu augue quis neque. Sed ac fermentum diam. Aliquam sollicitudin quam in risus venenatis placerat. Sed ut nulla lectus, a tempor magna. Vivamus porttitor lacus vitae ante interdum vitae gravida orci facilisis. Nullam pharetra, lectus sit amet tincidunt tincidunt, elit nulla hendrerit lectus, ac ornare eros felis eu quam. In elit enim, sollicitudin ut commodo a, vehicula quis orci. Proin nulla elit, cursus et ultricies nec, rutrum id nunc. Donec pellentesque velit sem, in bibendum lectus. Cras eu nunc at mi dictum scelerisque ut dignissim massa. Aenean congue, ante et lobortis iaculis, ante tellus interdum ante, vitae semper leo orci ac lacus. Curabitur orci eros, elementum quis convallis ut, auctor sit amet turpis.\nNullam tempor augue eu mi sagittis eu vestibulum elit tristique. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Vivamus eget purus viverra metus condimentum pharetra sit amet nec lorem. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean viverra metus leo. Curabitur ipsum dui, vehicula vel ullamcorper ac, mollis id enim. Pellentesque adipiscing gravida ultricies. Integer eleifend facilisis sem et ultricies. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. In orci nisl, molestie nec ornare non, ultricies vel dolor. Donec ut enim eget ipsum porta pretium. Donec eleifend metus at risus scelerisque venenatis. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Vivamus pretium, eros vel mollis ultrices, lorem orci gravida sem, a facilisis nisl lectus a neque. Donec rutrum lacus vel lectus porttitor egestas. Phasellus at tortor metus, et lobortis lectus. Vivamus porta turpis porta justo venenatis eget euismod odio ullamcorper. Duis faucibus, velit eget suscipit tincidunt, felis dolor mattis felis, blandit feugiat libero metus sed turpis. In hac habitasse platea dictumst. Duis dignissim nisi a nibh tristique et mattis metus sodales.', intNumber: 1337, trueOrFalse: " + ((i % 2) == 0) + "}\n");
    //stream.write("{id:1 shortStringAttribute:'Lorem ipsum dolor sit amet', longStringAttribute: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce ut volutpat sem. Sed ac nisi ac mauris tristique vestibulum et et diam. Nam diam velit, venenatis a malesuada vel, consectetur id risus. Sed a neque massa. Nulla ultricies, eros vel euismod malesuada, tortor elit scelerisque nulla, ac semper eros mi at sapien. Nulla lacinia pellentesque commodo. Donec euismod mauris est, eu aliquet dolor. Curabitur interdum massa at libero sodales convallis. Vestibulum lobortis malesuada elit. Praesent vel enim ipsum. Vivamus at vehicula mauris.\nAliquam erat volutpat. Vivamus ultricies, dui sed adipiscing consectetur, nisi erat eleifend sem, fermentum fringilla odio risus sit amet dolor. Duis malesuada aliquam porta. Vivamus dignissim rutrum urna, quis molestie neque interdum non. In tellus metus, congue eu convallis quis, laoreet ut velit. Nulla vel ipsum mauris. Nunc massa mauris, consectetur non lacinia nec, lacinia id erat. Nulla dapibus blandit magna a aliquet. Aliquam rutrum erat ut quam interdum rhoncus. Praesent dapibus luctus leo, eget condimentum nibh sagittis at. Duis ornare arcu velit. Mauris sollicitudin dapibus scelerisque. In enim neque, bibendum id aliquam vel, vestibulum eu orci. Donec velit erat, fringilla eu consequat sit amet, volutpat eleifend ligula. Donec aliquam leo at lacus rutrum ultricies. Etiam at accumsan risus. Donec semper ornare risus, at sodales risus vestibulum ut. Mauris accumsan venenatis neque quis faucibus.\nAenean interdum hendrerit sem ac pharetra. Vestibulum tempus, mauris a feugiat cursus, lacus ante malesuada libero, vel pellentesque massa tortor eu nunc. Nunc consequat erat sed orci aliquam et iaculis neque pretium. Mauris dolor lectus, dictum eu rutrum a, volutpat vel nibh. Etiam odio nibh, varius a bibendum a, blandit ut lectus. Ut id dui non lorem commodo iaculis at hendrerit nisl. Aliquam ultrices, purus at iaculis laoreet, quam dui volutpat elit, ut accumsan felis mauris vel mi. Fusce neque enim, pretium in auctor vitae, scelerisque sit amet leo. Ut sed lacus et augue auctor interdum interdum fermentum eros. Suspendisse eget ipsum eget massa dapibus ultricies. Nullam magna urna, porta nec dapibus at, elementum vel mauris. Sed imperdiet cursus purus, id sollicitudin mauris malesuada at. Nunc faucibus eleifend quam, sit amet imperdiet neque iaculis vel. Cras lobortis gravida velit ac hendrerit. Nunc nisi augue, sodales ultrices euismod non, rutrum quis augue. Suspendisse rutrum libero vel sem viverra vehicula. Proin porta commodo nisl vel tincidunt. Duis eros turpis, accumsan euismod molestie sodales, posuere quis libero. Integer faucibus tortor non purus porta et ultricies erat blandit. Quisque feugiat consequat rutrum.\nNam pretium, libero vitae blandit tincidunt, quam magna blandit arcu, in sollicitudin sapien dolor eu quam. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam facilisis sodales felis, ac euismod odio volutpat non. Nulla non volutpat felis. Sed lacus mi, vehicula vitae porta et, malesuada ut enim. Proin sed mauris sapien, eu feugiat mi. Integer luctus, risus sit amet vestibulum sagittis, massa felis porta dolor, vel bibendum arcu augue quis neque. Sed ac fermentum diam. Aliquam sollicitudin quam in risus venenatis placerat. Sed ut nulla lectus, a tempor magna. Vivamus porttitor lacus vitae ante interdum vitae gravida orci facilisis. Nullam pharetra, lectus sit amet tincidunt tincidunt, elit nulla hendrerit lectus, ac ornare eros felis eu quam. In elit enim, sollicitudin ut commodo a, vehicula quis orci. Proin nulla elit, cursus et ultricies nec, rutrum id nunc. Donec pellentesque velit sem, in bibendum lectus. Cras eu nunc at mi dictum scelerisque ut dignissim massa. Aenean congue, ante et lobortis iaculis, ante tellus interdum ante, vitae semper leo orci ac lacus. Curabitur orci eros, elementum quis convallis ut, auctor sit amet turpis.\nNullam tempor augue eu mi sagittis eu vestibulum elit tristique. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Vivamus eget purus viverra metus condimentum pharetra sit amet nec lorem. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean viverra metus leo. Curabitur ipsum dui, vehicula vel ullamcorper ac, mollis id enim. Pellentesque adipiscing gravida ultricies. Integer eleifend facilisis sem et ultricies. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. In orci nisl, molestie nec ornare non, ultricies vel dolor. Donec ut enim eget ipsum porta pretium. Donec eleifend metus at risus scelerisque venenatis. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Vivamus pretium, eros vel mollis ultrices, lorem orci gravida sem, a facilisis nisl lectus a neque. Donec rutrum lacus vel lectus porttitor egestas. Phasellus at tortor metus, et lobortis lectus. Vivamus porta turpis porta justo venenatis eget euismod odio ullamcorper. Duis faucibus, velit eget suscipit tincidunt, felis dolor mattis felis, blandit feugiat libero metus sed turpis. In hac habitasse platea dictumst. Duis dignissim nisi a nibh tristique et mattis metus sodales.', intNumber: 1337, trueOrFalse: true}\n");
    /*stream.write(
        
        JSON.stringify({ id: i,
        shortStringAttribute: shortIpsum,
        longStringAttribute: longIpsum,
        intNumber: Math.floor(Math.random() * 100),
        trueOrFalse: (i % 2 == 0) 
    }));*/
    
}
process.stdout.write('.');
}

stream.addListener('drain', function() {
    if (totalIters > 50000000) {
        process.exit();
    }
    dump();
});

dump();
